/*global jQuery, document, redux_opts, confirm, relid:true, console */function verify_fold(e){console.log(e)}function redux_change(e){e.hasClass("compiler")&&jQuery("#redux-compiler-hook").val(1),window.onbeforeunload=confirmOnPageExit,jQuery(document).ready(function(t){verify_fold(e);if(t(this).hasClass("redux-field-error")){t(this).removeClass("redux-field-error"),t(this).parent().find(".redux-th-error").slideUp();var n=t(this).closest(".redux-group-tab").attr("id"),r=!0;t("#"+n+" .redux-field-error").each(function(){r=!1}),r&&jQuery("#"+n+"_li .redux-menu-error").hide()}t("#redux-save-warn").slideDown()})}jQuery.noConflict();var confirmOnPageExit=function(e){e=e||window.event;var t=redux_opts.save_pending;return e&&(e.returnValue=t),t};jQuery(".redux-action_bar, .redux-presets-bar").click(function(){window.onbeforeunload=null}),jQuery(document).ready(function(e){function t(e){return decodeURI(((new RegExp(e+"="+"(.+?)(&|$)")).exec(location.search)||[,""])[1])}function s(){var e=jQuery("#info_bar").width()-2;!jQuery("#info_bar").isOnScreen()&&!jQuery("#redux-footer-sticky").isOnScreen()?(jQuery("#redux-footer").css({position:"fixed",bottom:"0",width:e}),jQuery("#redux-footer").addClass("sticky-footer-fixed"),jQuery("#redux-sticky-padder").show()):(jQuery("#redux-footer").css({background:"#eee",position:"inherit",bottom:"inherit",width:"inherit"}),jQuery("#redux-sticky-padder").hide(),jQuery("#redux-footer").removeClass("sticky-footer-fixed"))}jQuery().tipsy&&e(".tips").tipsy({fade:!0,gravity:"s",opacity:.7}),jQuery(".fld").click(function(){var t=".f_"+this.id;e(t).slideToggle("normal","swing")}),jQuery(".fld-parent").change(function(){var t=".f_"+this.id+"-"+this.val();e(t).slideToggle("normal","swing")}),jQuery(".redux-group-tab-link-a").click(function(){relid=jQuery(this).data("rel"),e("#"+relid).children(".fold").each(function(){verify_fold(jQuery(this))}),e.cookie("redux_current_tab",relid,{expires:7,path:"/"});var t=jQuery(".redux-group-tab-link-li.active .redux-group-tab-link-a").data("rel");jQuery("#"+t+"_section_group_li").removeClass("active"),jQuery("#"+t+"_section_group").hide(),jQuery("#"+relid+"_section_group").fadeIn(300,function(){s()}),jQuery("#"+relid+"_section_group_li").addClass("active")});var n=t("tab");n!==""?e.cookie("redux_current_tab_get")!==n&&(e.cookie("redux_current_tab",n,{expires:7,path:"/"}),e.cookie("redux_current_tab_get",n,{expires:7,path:"/"}),jQuery("#"+n+"_section_group_li").click()):e.cookie("redux_current_tab_get")!==""&&e.removeCookie("redux_current_tab_get");var r=jQuery("#"+e.cookie("redux_current_tab")+"_section_group_li_a");e.cookie("redux_current_tab")===null||typeof e.cookie("redux_current_tab")=="undefined"||r.length===0?jQuery(".redux-group-tab-link-a:first").click():r.click(),jQuery('input[name="'+redux_opts.opt_name+'[defaults]"]').click(function(){if(!confirm(redux_opts.reset_confirm))return!1;window.onbeforeunload=null}),jQuery("#expand_options").click(function(e){e.preventDefault();var t=jQuery("#expand_options"),n=jQuery("#redux-sidebar").width(),r=jQuery("#redux-group-menu .active a").data("rel")+"_section_group";return t.hasClass("expanded")?(t.removeClass("expanded"),jQuery("#redux-main").removeClass("expand"),jQuery("#redux-sidebar").stop().animate({"margin-left":"0px"},500),jQuery("#redux-main").stop().animate({"margin-left":n},500),jQuery(".redux-group-tab").each(function(){jQuery(this).attr("id")!==r&&jQuery(this).fadeOut("fast")})):(t.addClass("expanded"),jQuery("#redux-main").addClass("expand"),jQuery("#redux-sidebar").stop().animate({"margin-left":-n-2},500),jQuery("#redux-main").stop().animate({"margin-left":"0px"},500),jQuery(".redux-group-tab").fadeIn()),!1}),jQuery("#redux-import").click(function(e){if(jQuery("#import-code-value").val()===""&&jQuery("#import-link-value").val()==="")return e.preventDefault(),!1}),jQuery("#redux-save").is(":visible")&&jQuery("#redux-save").slideDown(),jQuery("#redux-imported").is(":visible")&&jQuery("#redux-imported").slideDown(),jQuery("input, textarea, select").on("change",function(){jQuery(this).hasClass("noUpdate")||redux_change(jQuery(this))}),jQuery("#redux-import-code-button").click(function(){jQuery("#redux-import-link-wrapper").is(":visible")&&(jQuery("#redux-import-link-wrapper").fadeOut("fast"),jQuery("#import-link-value").val("")),jQuery("#redux-import-code-wrapper").fadeIn("slow")}),jQuery("#redux-import-link-button").click(function(){jQuery("#redux-import-code-wrapper").is(":visible")&&(jQuery("#redux-import-code-wrapper").fadeOut("fast"),jQuery("#import-code-value").val("")),jQuery("#redux-import-link-wrapper").fadeIn("slow")}),jQuery("#redux-export-code-copy").click(function(){jQuery("#redux-export-link-value").is(":visible")&&jQuery("#redux-export-link-value").fadeOut("slow"),jQuery("#redux-export-code").toggle("fade")}),jQuery("#redux-export-link").click(function(){jQuery("#redux-export-code").is(":visible")&&jQuery("#redux-export-code").fadeOut("slow"),jQuery("#redux-export-link-value").toggle("fade")}),jQuery.fn.isOnScreen=function(){var e=jQuery(window),t={top:e.scrollTop(),left:e.scrollLeft()};t.right=t.left+e.width(),t.bottom=t.top+e.height();var n=this.offset();return n.right=n.left+this.outerWidth(),n.bottom=n.top+this.outerHeight(),!(t.right<n.left||t.left>n.right||t.bottom<n.top||t.top>n.bottom)};var i=jQuery("#redux-footer").height();jQuery("#redux-sticky-padder").css({height:i}),jQuery(window).scroll(function(){s()}),jQuery(window).resize(function(){s()}),jQuery("#redux-save, #redux-imported").delay(4e3).slideUp(),jQuery("#redux-field-errors").delay(8e3).slideUp(),jQuery(".redux-save").click(function(){window.onbeforeunload=null}),jQuery(".fold-data").each(function(){var e=jQuery(this).attr("id").replace("foldChild-",""),t=jQuery(this).attr("id"),n=jQuery(this).val(),r="";n.indexOf(",")!==-1?r=n.split(","):r=n.split(),jQuery.each(r,function(n){var i=jQuery("#"+r[n]);i.addClass("fold");var s=jQuery("#"+t).attr("data-"+r[n]);i.attr("data-"+e)&&(s=i.attr("data-"+e)+","+s),i.attr("data-"+e,s);var o="",u=jQuery("#"+r[n]),a=jQuery("#"+r[n]).attr("data-fold");typeof u!="undefined"&&typeof a!="undefined"&&(o+=jQuery("#"+r[n]).attr("data-fold")),o!==""&&(o+=","),o+=e,jQuery("#"+r[n]).attr("data-fold",o),verify_fold(jQuery("#"+r[n]))})})});