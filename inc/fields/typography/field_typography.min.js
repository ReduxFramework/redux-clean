/* global redux_change */jQuery.noConflict(),jQuery(document).ready(function(e){function t(t,n){e(n).hasClass("redux-typography-family");var r=e("#"+t+" select.redux-typography-family ").val(),i=e("#"+t+" .redux-typography-size").val(),s=e("#"+t+" .redux-typography-height").val(),o=e("#"+t+" select.redux-typography-style").val(),u=e("#"+t+" select.redux-typography-script").val(),a=e("#"+t+" .redux-typography-color").val(),f=e("#"+t).data("units"),l=e("#"+t+" .redux-typography-family option:selected");console.log(jQuery.parseJSON(decodeURIComponent(l.data("details"))));var c=l.data("google"),h=jQuery.parseJSON(decodeURIComponent(l.data("details"))),p="",d="";if(e(n).hasClass("redux-typography-family")){d='<option value=""></option>';for(var v=0;v<Object.size(h.variants);v++){if(h.variants[v]===null)continue;console.log(h.variants[v]),typeof h.variants[v].id!==undefined&&h.variants[v]&&h.variants[v].id===o||Object.size(h.variants)===1?(p=' selected="selected"',e("#"+t+" .typography-style .select2-chosen").text(h.variants[v].name.replace("+"," "))):p="",d+='<option value="'+h.variants[v].id+'"'+p+">"+h.variants[v].name.replace(/\+/g," ")+"</option>"}e("#"+t+" .redux-typography-style").html(d),d='<option value=""></option>';for(v=0;v<=Object.size(h.subsets);v++){if(typeof h.subsets[v]===undefined)continue;h.subsets[v].id===u||Object.size(h.subsets)===1?(p=' selected="selected"',e("#"+t+" .typography-script .select2-chosen").text(h.subsets[v].name.replace("+"," "))):p="",d+='<option value="'+h.subsets[v].id+'"'+p+">"+h.subsets[v].name.replace(/\+/g," ")+"</option>"}e("#"+t+" .redux-typography-script").html(d)}var m="style_link_"+t;if(r){if(r!=="none"&&r!==""){e("."+m).remove();var g=r.replace(/\s+/g,"+");if(e("#"+t+" .redux-typography-family option:selected").data("google")){var y="http://fonts.googleapis.com/css?family="+g;o&&(y+=":"+o.replace(/\-/g," ")),u&&(y+="&subset="+u),e("head").append('<link href="'+y+'" rel="stylesheet" type="text/css" class="'+m+'">'),e("#"+t+" .redux-typography-google").val(!0)}else e("#"+t+" .redux-typography-google").val(!1);e("#"+t+" .typography-preview").css("font-size",i+f),e("#"+t+" .typography-preview").css("font-style","normal");if(o.indexOf("-")!==-1){var b=o.split("-");e("#"+t+" .typography-preview").css("font-weight",b[0]),e("#"+t+" .typography-preview").css("font-style",b[1])}else c||e("#"+t+" .typography-preview").css("font-weight",o),e("#"+t+" .typography-preview").css("font-style",o);e("#"+t+" .typography-preview").css("font-family",r+", sans-serif")}else e("#"+t+" .typography-preview").css("font-family","");s?e("#"+t+" .typography-preview").css("line-height",s+f):e("#"+t+" .typography-preview").css("line-height",i+f),e("#"+t+" .typography-preview").css("color",a)}e("#"+t+" .typography-style .select2-chosen").text(e("#"+t+" .redux-typography-style option:selected").text()),e("#"+t+" .typography-script .select2-chosen").text(e("#"+t+" .redux-typography-script option:selected").text())}Object.size=function(e){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t},jQuery(".redux-typography-container").each(function(){var n=jQuery("#"+jQuery(this).attr("id")+" .redux-typography-family");n.data("value")!==""&&jQuery(n).val(n.data("value")),t(jQuery(this).attr("id"),e(this))}),jQuery(".redux-typography").change(function(){t(jQuery(this).closest(".redux-typography-container").attr("id"),e(this))}),jQuery(".redux-typography-size, .redux-typography-height").keyup(function(){t(jQuery(this).closest(".redux-typography-container").attr("id"),e(this))}),e(".redux-typography-color").wpColorPicker({change:function(n,r){redux_change(jQuery(this)),jQuery(this).val(r.color.toString()),t(jQuery(this).closest(".redux-typography-container").attr("id"),e(this))}}),jQuery(".redux-typography-size, .redux-typography-height").numeric({negative:!1}),jQuery(".redux-typography-family, .redux-typography-style, .redux-typography-script").select2({width:"resolve",triggerChange:!0,allowClear:!0})});