/* global redux_change *//**
 * Typography
 * Dependencies		: google.com, jquery
 * Feature added by : Dovy Paukstys - http://simplerain.com/
 * Date				: 06.14.2013
 */jQuery.noConflict(),jQuery(document).ready(function(e){function t(t){var n=jQuery(t).parents(".redux-typography-container:first").attr("id");e(t).hasClass("redux-typography-family");var r=e("#"+n+" select.redux-typography-family").val(),i=e("#"+n+" select.redux-typography-family-backup").val(),s=e("#"+n+" .redux-typography-size").val(),o=e("#"+n+" .redux-typography-height").val(),u=e("#"+n+" select.redux-typography-style").val(),a=e("#"+n+" select.redux-typography-subsets").val(),f=e("#"+n+" .redux-typography-color").val(),l=e("#"+n).data("units"),c=e("#"+n+" .redux-typography-family option:selected"),h=r,p=c.data("google");e("#"+n).hasClass("typography-initialized")||(u=e("#"+n+" select.redux-typography-style").data("value"),a=e("#"+n+" select.redux-typography-subsets").data("value"),u!==""&&(u=String(u)),typeof a!==undefined&&(a=String(a)),e("#"+n).addClass("typography-initialized"));var d=jQuery.parseJSON(decodeURIComponent(c.data("details")));if(e(t).hasClass("redux-typography-family")){var v='<option value=""></option>';if(p){var m="";e.each(d.variants,function(e,t){t.id===u||Object.size(d.variants)===1?(m=' selected="selected"',u=t.id):m="",v+='<option value="'+t.id+'"'+m+">"+t.name.replace(/\+/g," ")+"</option>"}),e("#"+n+" .redux-typography-style").html(v),m="",v='<option value=""></option>',e.each(d.subsets,function(e,t){t.id===a||Object.size(d.subsets)===1?(m=' selected="selected"',a=t.id):m="",v+='<option value="'+t.id+'"'+m+">"+t.name.replace(/\+/g," ")+"</option>"}),typeof i!="undefined"&&(h+=", "+i),e("#"+n+" .redux-typography-subsets").html(v),e("#"+n+" .redux-typography-subsets").fadeIn("fast"),e("#"+n+" .typography-family-backup").fadeIn("fast")}else d&&(e.each(d,function(t,r){t===u||t==="normal"?(m=' selected="selected"',e("#"+n+" .typography-style .select2-chosen").text(r)):m="",v+='<option value="'+t+'"'+m+">"+r.replace("+"," ")+"</option>"}),e("#"+n+" .redux-typography-style").html(v),e("#"+n+" .redux-typography-subsets").fadeOut("fast"),e("#"+n+" .typography-family-backup").fadeOut("fast"))}else e(t).hasClass("redux-typography-family-backup")&&(i!==""&&(h+=", "+i),e("#"+n+" .redux-typography-font-family").val(h));e("#"+n+" select.redux-typography-style option[value='"+u+"']").length===0?(u="",e("#"+n+" select.redux-typography-style").val("")):u==="400"&&e("#"+n+" select.redux-typography-style").val(u),e("#"+n+" select.redux-typography-subsets option[value='"+a+"']").length===0&&(a="",e("#"+n+" select.redux-typography-subsets").val(""));var g="style_link_"+n;if(r){if(r!=="none"&&r!==""){e("."+g).remove();var y=r.replace(/\s+/g,"+");if(p){var b="http://fonts.googleapis.com/css?family="+y;u&&(b+=":"+u.replace(/\-/g," ")),a&&(b+="&subset="+a),e("head").append('<link href="'+b+'" rel="stylesheet" type="text/css" class="'+g+'">'),e("#"+n+" .redux-typography-google").val(!0)}else e("#"+n+" .redux-typography-google").val(!1);e("#"+n+" .typography-preview").css("font-size",s+l),e("#"+n+" .typography-preview").css("font-style","normal"),u.indexOf("italic")!==-1?(e("#"+n+" .typography-preview").css("font-style","italic"),e("#"+n+" .typography-font-style").val("italic"),u=u.replace("italic","")):e("#"+n+" .typography-font-style").val(""),e("#"+n+" .typography-font-weight").val(u),e("#"+n+" .typography-preview").css("font-weight",u),e("#"+n+" .typography-preview").css("font-family",r+", sans-serif")}else e("#"+n+" .typography-preview").css("font-family","");o||(o=s),e("#"+n+" .typography-preview").css("line-height",o+l),e("#"+n+" .typography-font-size").val(s+l),e("#"+n+" .typography-line-height").val(o+l),e("#"+n+" .typography-preview").css("color",f)}e("#"+n+" .redux-typography-font-family").val(h),e("#"+n+" .typography-style .select2-chosen").text(e("#"+n+" .redux-typography-style option:selected").text()),e("#"+n+" .typography-script .select2-chosen").text(e("#"+n+" .redux-typography-subsets option:selected").text())}Object.size=function(e){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t},jQuery(".redux-typography-container").each(function(){var e=jQuery(this).find(".redux-typography-family");e.data("value")!==""&&jQuery(e).val(e.data("value")),t(e)}),jQuery(".redux-typography").on("change",function(){t(this)}),jQuery(".redux-typography-size, .redux-typography-height").keyup(function(){t(this)}),e(".redux-typography-color").wpColorPicker({change:function(e,n){redux_change(jQuery(this)),jQuery(this).val(n.color.toString()),t(jQuery(this))}}),jQuery(".redux-typography-size, .redux-typography-height").numeric({negative:!1}),jQuery(".redux-typography-family, .redux-typography-family-backup").select2({width:"resolve",triggerChange:!0,allowClear:!0})});